var burgerMenu=document.querySelector(".header__burger"),burgerBtn=document.querySelector(".header__burger-btn"),burgerClose=document.querySelector(".header__cross"),headerCover=document.querySelector(".header__cover"),burgerLinks=document.getElementById("header_links"),upForm=document.querySelector(".header__form"),burgerGetinfo=document.querySelector(".header__form-btn"),body=document.body||document.getElementsByTagName("body")[0],puArr=(burgerBtn.addEventListener("click",function(e){burgerMenu.classList.contains("header__burger--out")&&burgerMenu.classList.remove("header__burger--out"),burgerMenu.classList.add("header__burger--in"),headerCover.style.display="block",body.style.overflow="hidden",e.stopImmediatePropagation()}),[burgerClose,burgerLinks].forEach(function(e){e.addEventListener("click",function(e){burgerMenu.classList.remove("header__burger--in"),headerCover.style.display="none",body.style.overflow="scroll",e.stopImmediatePropagation()})})),upperFormBtn=(burgerGetinfo.addEventListener("click",function(e){burgerMenu.classList.remove("header__burger--in"),upForm.style.display="block",e.stopImmediatePropagation()}),document.querySelector(".form__btn")),telSelector=(upForm.addEventListener("click",function(e){e.target.closest(".form__btn")&&sendForm()}),document.querySelector(".tel-selector")),nameSelector=document.getElementById("name"),questionSelector=document.getElementById("question"),sendForm=(Inputmask({mask:"+7(999)999-99-99",greedy:"true"}).mask(telSelector),function(){document.addEventListener("submit",function(e){e.preventDefault();var e=telSelector.value,t=nameSelector.value,o=questionSelector.value,e=e.replace(/[^0-9]/g,"");document.getElementById("agree").checked?2<e.length&&e.length<50&&1<t.length&&t.length<36&&2<o.length&&o.length<1501?(document.getElementById("warning").style.display="block",document.getElementById("warning").style.color="#49ff0c",document.getElementById("warning").textContent="Спасибо, мы свяжемся с Вами!",setTimeout(function(){document.querySelector(".header__form").style.display="none",headerCover.style.display="none",body.style.overflow="scroll"},2e3)):(document.getElementById("warning").textContent="Пожалуйста введите правильные данные",document.getElementById("warning").style.display="block"):(document.getElementById("warning").textContent="Пожалуйста дайте свое согласие на обработку персональных данных",document.getElementById("warning").style.display="block")})});function animStart(){var e=document.querySelector(".hero__module01"),t=document.querySelector(".hero__module02"),o=document.querySelector(".hero__module03"),r=document.querySelector(".hero__module04"),n=document.querySelector(".hero__bigobj"),l=document.querySelector(".hero__fog"),c=document.querySelector(".hero__blur"),a=document.querySelector(".hero__alert");e.setAttribute("id","module01"),t.setAttribute("id","module02"),o.setAttribute("id","module03"),r.setAttribute("id","module04"),n.setAttribute("id","bigdevice"),l.setAttribute("id","fog"),c.setAttribute("id","blur"),setTimeout(function(){a.setAttribute("id","alert_start"),document.removeEventListener("click",animStart)},2e3)}function alertStart(e){alert=document.querySelector(".hero__alert"),e.target.closest("#sub")&&alert.removeAttribute("id","alert_start")}document.addEventListener("click",animStart),body.addEventListener("click",alertStart);var count,accordeon=document.querySelector(".questions__part2"),tab=document.querySelectorAll(".questions__block"),button=document.querySelectorAll(".questions__toform"),arrows=document.querySelectorAll(".questions__toform");function click1(e){var r=e.target.closest(".questions__block");r&&tab.forEach(function(e,t){var o=e.firstElementChild.lastElementChild;e===r&&(e.classList.contains("mark")?1==count?(o.removeAttribute("id","block-act--in"),o.setAttribute("id","block-act--out"),e.lastElementChild.style.transform="rotate(0deg)translate(0, -50%)",e.lastElementChild.style.top="50%",count++):2==count&&(o.removeAttribute("id","block-act--out"),o.setAttribute("id","block-act--in"),e.lastElementChild.style.transform="rotate(180deg)translate(0, 0)",e.lastElementChild.style.top="30px",count--):(o.setAttribute("id","block-act--in"),count=0,count++,e.classList.add("mark"),e.lastElementChild.style.transform="rotate(180deg)translate(0, 0)",e.lastElementChild.style.top="30px"))})}accordeon.addEventListener("click",function(e){click1(e)}),document.addEventListener("DOMContentLoaded",function(){var t,e=document.createElement("script"),o=(e.src="https://www.youtube.com/iframe_api",document.getElementsByTagName("script")[0]),e=(o.parentNode.insertBefore(e,o),document.getElementById("vcross1")),r=document.getElementById("vframe1"),n=document.querySelector(".cover"),l=document.querySelector(".video__link"),c=document.querySelector("body");l.addEventListener("click",function(e){r.classList.add("active"),n.classList.add("active"),c.style.overflow="hidden",t=new YT.Player("player",{height:"1080",width:"100%",videoId:l.dataset.video,playerVars:{autoplay:1,controls:1},events:{onReady:function(e){e.target.setVolume(30),e.target.playVideo(),e.target.setPlaybackQuality("highres")},onStateChange:function(e){e.data==YT.PlayerState.BUFFERING&&e.target.setPlaybackQuality("highres")}}})}),[n,e].forEach(function(e){e.addEventListener("click",function(e){r.classList.remove("active"),n.classList.remove("active"),c.style.overflow="scroll",t.destroy()})})});var swiper=new Swiper(".swiper",{loop:!0,pagination:{el:".slider__pagination",clickable:!0},navigation:{nextEl:".slider__btn-next",prevEl:".slider__btn-prev"}});function TestDriveFn(){document.getElementById("testdrive").scrollIntoView({block:"start",behavior:"smooth"})}function decisionsFn(){document.getElementById("decisions").scrollIntoView({block:"start",behavior:"smooth"})}function learningFn(){document.getElementById("learning").scrollIntoView({block:"start",behavior:"smooth"})}function trustFn(){document.getElementById("trust").scrollIntoView({block:"start",behavior:"smooth"})}function questionsFn(){document.getElementById("questions").scrollIntoView({block:"start",behavior:"smooth"})}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiYnVyZ2VyTWVudSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImJ1cmdlckJ0biIsImJ1cmdlckNsb3NlIiwiaGVhZGVyQ292ZXIiLCJidXJnZXJMaW5rcyIsImdldEVsZW1lbnRCeUlkIiwidXBGb3JtIiwiYnVyZ2VyR2V0aW5mbyIsIml0ZW0iLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImNsYXNzTGlzdCIsInJlbW92ZSIsImFkZCIsInN0eWxlIiwiZGlzcGxheSIsImJvZHkiLCJvdmVyZmxvdyIsInN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiIsImZvckVhY2giLCJ1cHBlckZvcm1CdG4iLCJjbG9zZXN0IiwidGVsU2VsZWN0b3IiLCJ0YXJnZXQiLCJzZW5kRm9ybSIsIm5hbWVTZWxlY3RvciIsIklucHV0bWFzayIsInByZXZlbnREZWZhdWx0IiwiZ3JlZWR5IiwibWFzayIsImxvbmdOdW0iLCJyZXBsYWNlIiwiZXZlbnQiLCJsb25nMiIsInZhbHVlIiwibG9uZzMiLCJnb29kYnkiLCJsb25nIiwiY2hlY2tlZCIsImxlbmd0aCIsInRleHRDb250ZW50Iiwic2V0VGltZW91dCIsImNvbG9yIiwiYWxlcnQiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiYW5pbVN0YXJ0IiwibTMiLCJtNCIsImZvZyIsImJsdXIiLCJtMSIsImFsZXJ0U3RhcnQiLCJiaWdPYmciLCJyZW1vdmVBdHRyaWJ1dGUiLCJhY2NvcmRlb24iLCJidXR0b24iLCJxdWVyeVNlbGVjdG9yQWxsIiwiY291bnQiLCJsYXN0RWxlbWVudENoaWxkIiwidGFiIiwidG9wIiwiYXJyb3dzIiwiY2xpY2sxIiwiY2hpbGQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImNyZWF0ZUVsZW1lbnQiLCJmaXJzdFNjcmlwdFRhZyIsInl0Q3Jvc3MiLCJ0cmFuc2Zvcm0iLCJZVCIsImV2ZW50cyIsIm9uUGxheWVyUmVhZHkiLCJvblBsYXllclN0YXRlQ2hhbmdlIiwicGxheWVyIiwidGFnIiwic3JjIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJwYXJlbnROb2RlIiwiaW5zZXJ0QmVmb3JlIiwiYmFja2dybyIsInl0QmFjayIsInBhZ2luYXRpb24iLCJtYXJrIiwibmF2aWdhdGlvbiIsIm5leHRFbCIsInByZXZFbCIsIlBsYXllciIsImhlaWdodCIsIndpZHRoIiwidmlkZW9JZCIsImRhdGFzZXQiLCJ2aWRlbyIsInBsYXllclZhcnMiLCJhdXRvcGxheSIsImNvbnRyb2xzIiwiVGVzdERyaXZlRm4iLCJvblJlYWR5IiwiZGVjaXNpb25zRm4iLCJzZXRWb2x1bWUiLCJwbGF5VmlkZW8iLCJzZXRQbGF5YmFja1F1YWxpdHkiLCJzY3JvbGxJbnRvVmlldyIsImJsb2NrIiwiZGF0YSIsIlBsYXllclN0YXRlIiwiQlVGRkVSSU5HIiwibGVhcm5pbmdGbiIsImJlaGF2aW9yIiwidHJ1c3RGbiIsImRlc3Ryb3kiLCJzd2lwZXIiLCJTd2lwZXIiLCJsb29wIiwiZWwiLCJjbGlja2FibGUiLCJxdWVzdGlvbnNGbiJdLCJtYXBwaW5ncyI6IkFBR0EsSUFBSUEsV0FBYUMsU0FBU0MsY0FBYyxpQkFBaUIsRUFBekRDLFVBQWNGLFNBQUdBLGNBQVNDLHFCQUFnQyxFQUN4REMsWUFBWUYsU0FBU0MsY0FBYyxnQkFBQSxFQUNuQ0UsWUFBY0gsU0FBU0MsY0FBYyxnQkFBZ0IsRUFDckRHLFlBQWNKLFNBQVNDLGVBQWMsY0FBQSxFQUNyQ0ksT0FBQUEsU0FBY0wsY0FBU00sZUFBZSxFQUN0Q0MsY0FBU1AsU0FBU0MsY0FBYyxtQkFBZ0IsRUFDaERPLEtBQUFBLFNBQWdCUixNQUFRQSxTQUFDQyxxQkFBYyxNQUFvQixFQUFBLEdBZTNEUSxPQVpGUCxVQUFVUSxpQkFBaUIsUUFBUyxTQUFBQyxHQUc5QlosV0FBV2EsVUFBVUMsU0FBTyxxQkFBc0IsR0FDdERkLFdBQUFhLFVBQUFDLE9BQUEscUJBQUEsRUFDQWQsV0FBV2EsVUFBVUUsSUFBSSxvQkFBb0IsRUFDN0NWLFlBQVlX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ZUFBZSxXQUFXLEVBQUVpRyxlQUFlLENBQ2hEQyxNQUFPLFFBQ1BLLFNBQVUsUUFDZCxDQUFDLENBQ0wiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG4vLyDQsdGD0YDQs9C10YAt0LjQtdC90Y5cclxuXHJcbmxldCBidXJnZXJNZW51ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9fYnVyZ2VyJyksXHJcbiAgYnVyZ2VyQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9fYnVyZ2VyLWJ0bicpLFxyXG4gIGJ1cmdlckNsb3NlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9fY3Jvc3MnKSxcclxuICBoZWFkZXJDb3ZlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX2NvdmVyJyksXHJcbiAgYnVyZ2VyTGlua3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVhZGVyX2xpbmtzJyksXHJcbiAgdXBGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oZWFkZXJfX2Zvcm1cIiksXHJcbiAgYnVyZ2VyR2V0aW5mbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX2Zvcm0tYnRuJyksXHJcbiAgYm9keSA9IGRvY3VtZW50LmJvZHkgfHwgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2JvZHknKVswXTtcclxuXHJcbmJ1cmdlckJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblxyXG4gIGlmIChidXJnZXJNZW51LmNsYXNzTGlzdC5jb250YWlucygnaGVhZGVyX19idXJnZXItLW91dCcpKSB7XHJcbiAgICAgIGJ1cmdlck1lbnUuY2xhc3NMaXN0LnJlbW92ZSgnaGVhZGVyX19idXJnZXItLW91dCcpO1xyXG4gIH07XHJcbiAgYnVyZ2VyTWVudS5jbGFzc0xpc3QuYWRkKCdoZWFkZXJfX2J1cmdlci0taW4nKTtcclxuICBoZWFkZXJDb3Zlci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICBib2R5LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XHJcbiAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKVxyXG59KTtcclxuXHJcbmxldCBwdUFyciA9IFtidXJnZXJDbG9zZSwgYnVyZ2VyTGlua3NdLmZvckVhY2goaXRlbSA9PiB7XHJcbiAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICBidXJnZXJNZW51LmNsYXNzTGlzdC5yZW1vdmUoJ2hlYWRlcl9fYnVyZ2VyLS1pbicpO1xyXG4gICAgaGVhZGVyQ292ZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgIGJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnc2Nyb2xsJztcclxuICAgIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5idXJnZXJHZXRpbmZvLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICBidXJnZXJNZW51LmNsYXNzTGlzdC5yZW1vdmUoJ2hlYWRlcl9fYnVyZ2VyLS1pbicpO1xyXG4gIHVwRm9ybS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xyXG59KTtcclxuXHJcbi8vINCy0LXRgNGF0L3Rj9GPINGE0L7RgNC80LBcclxuXHJcbmxldCB1cHBlckZvcm1CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybV9fYnRuJyk7XHJcblxyXG51cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gIFxyXG4gIGlmIChlLnRhcmdldC5jbG9zZXN0KCcuZm9ybV9fYnRuJykpIHtcclxuXHJcbiAgICAgIHNlbmRGb3JtKCk7XHJcblxyXG4gIH1cclxufSlcclxuXHJcbi8v0JzQsNGB0LrQsCDRhNC+0YDQvNGLXHJcblxyXG5sZXQgdGVsU2VsZWN0b3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGVsLXNlbGVjdG9yJyksXHJcbiAgbmFtZVNlbGVjdG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25hbWUnKSxcclxuICBxdWVzdGlvblNlbGVjdG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3F1ZXN0aW9uJyk7XHJcblxyXG4vLyBsZXQgdGVsU2VsZWN0b3JEb3duID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRlbC1zZWxlY3RvcicpLFxyXG4vLyAgICAgbmFtZVNlbGVjdG9yRG93biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduYW1lLWYnKSxcclxuLy8gICBxdWVzdGlvblNlbGVjdG9yRG93biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdxdWVzdGlvbi1mJyk7ICBcclxuXHJcbklucHV0bWFzayh7IFwibWFza1wiOiBcIis3KDk5OSk5OTktOTktOTlcIiwgXCJncmVlZHlcIjogXCJ0cnVlXCIgfSkubWFzayh0ZWxTZWxlY3Rvcik7XHJcblxyXG5sZXQgc2VuZEZvcm0gPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBcclxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIGxldCBsb25nID0gdGVsU2VsZWN0b3IudmFsdWUsIFxyXG4gICAgICBsb25nMiA9IG5hbWVTZWxlY3Rvci52YWx1ZSxcclxuICAgICAgbG9uZzMgPSBxdWVzdGlvblNlbGVjdG9yLnZhbHVlO1xyXG4gICAgbGV0IGxvbmdOdW0gPSBsb25nLnJlcGxhY2UoL1teMC05XS9nLCBcIlwiKTsgLy/Rg9C00LDQu9GP0LXQvCDQuNC3INGB0YLRgNC+0LrQuCDQstGB0ZEsINC60YDQvtC80LUg0YbQuNGE0YAgIC8vINC+0YjQuNCx0LrQsCDQuNC3LdC30LAg0Y3RgtC+0LPQvlxyXG5cclxuICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWdyZWUnKS5jaGVja2VkKSB7XHJcbiAgICAgIFxyXG4gICAgICBpZiAoKChsb25nTnVtLmxlbmd0aCA+IDIpICYmIChsb25nTnVtLmxlbmd0aCA8IDUwKSkgJiYgKChsb25nMi5sZW5ndGggPiAxKSAmJiAobG9uZzIubGVuZ3RoIDwgMzYpKSAmJiAoKGxvbmczLmxlbmd0aCA+IDIpICYmIChsb25nMy5sZW5ndGggPCAxNTAxKSkpIHtcclxuICAgICAgXHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dhcm5pbmcnKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3YXJuaW5nJykuc3R5bGUuY29sb3IgPSBcIiM0OWZmMGNcIjtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2FybmluZycpLnRleHRDb250ZW50ID0gXCLQodC/0LDRgdC40LHQviwg0LzRiyDRgdCy0Y/QttC10LzRgdGPINGBINCS0LDQvNC4IVwiO1xyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gZ29vZGJ5KCkge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX2Zvcm0nKS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgICAgICBoZWFkZXJDb3Zlci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdzY3JvbGwnO1xyXG5cclxuICAgICAgICB9XHJcbiAgICAgICAgc2V0VGltZW91dChnb29kYnksIDIwMDApO1xyXG4gICAgICAgICAgXHJcbiAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3YXJuaW5nJykudGV4dENvbnRlbnQgPSBcItCf0L7QttCw0LvRg9C50YHRgtCwINCy0LLQtdC00LjRgtC1INC/0YDQsNCy0LjQu9GM0L3Ri9C1INC00LDQvdC90YvQtVwiO1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3YXJuaW5nJykuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuXHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2FybmluZycpLnRleHRDb250ZW50ID0gXCLQn9C+0LbQsNC70YPQudGB0YLQsCDQtNCw0LnRgtC1INGB0LLQvtC1INGB0L7Qs9C70LDRgdC40LUg0L3QsCDQvtCx0YDQsNCx0L7RgtC60YMg0L/QtdGA0YHQvtC90LDQu9GM0L3Ri9GFINC00LDQvdC90YvRhVwiO1xyXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2FybmluZycpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcblxyXG4gICAgfVxyXG4gIH0pXHJcbn1cclxuXHJcbi8vIEjQuNC20L3Rj9GPINGE0L7RgNC80LBcclxuXHJcbi8qIGRvd25Gb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb3JlX19mb3JtXCIpO1xyXG5cclxuZG93bkZvcm0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gIFxyXG4gIGlmIChlLnRhcmdldC5jbG9zZXN0KCcuZm9ybV9fYnRuLWRvd24nKSkge1xyXG5cclxuICAgICAgc2VuZEZvcm0oKTtcclxuXHJcbiAgfVxyXG59KSAqL1xyXG5cclxuXHJcbi8qIC8v0JzQsNGB0LrQsCDRhNC+0YDQvNGLXHJcblxyXG5sZXQgc2VuZEZvcm1Eb3duID0gZnVuY3Rpb24gKCkge1xyXG4gIC8vIGxldCBmb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvcm0nKTtcclxuICAgIFxyXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uKGV2ZW50Mikge1xyXG4gICAgZXZlbnQyLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBsZXQgbG9uZyA9IHRlbFNlbGVjdG9yRG93bi52YWx1ZSxcclxuICAgICAgbG9uZzIgPSBuYW1lU2VsZWN0b3JEb3duLnZhbHVlLFxyXG4gICAgICBsb25nMyA9IHF1ZXN0aW9uU2VsZWN0b3JEb3duLnZhbHVlO1xyXG4gICAgbGV0IGxvbmdOdW0gPSBsb25nLnJlcGxhY2UoL1teMC05XS9nLCBcIlwiKTsgLy/Rg9C00LDQu9GP0LXQvCDQuNC3INGB0YLRgNC+0LrQuCDQstGB0ZEsINC60YDQvtC80LUg0YbQuNGE0YBcclxuXHJcbiAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FncmVlLWYnKS5jaGVja2VkKSB7XHJcbiAgICAgIFxyXG4gICAgICBpZiAoKChsb25nTnVtLmxlbmd0aCA+IDIpICYmIChsb25nTnVtLmxlbmd0aCA8IDUwKSkgJiYgKChsb25nMi5sZW5ndGggPiAxKSAmJiAobG9uZzIubGVuZ3RoIDwgMzYpKSAmJiAoKGxvbmczLmxlbmd0aCA+IDIpICYmIChsb25nMy5sZW5ndGggPCAxNTAxKSkpIHtcclxuICAgICAgXHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dhcm5pbmcnKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3YXJuaW5nJykuc3R5bGUuY29sb3IgPSBcIiM0OWZmMGNcIjtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2FybmluZycpLnRleHRDb250ZW50ID0gXCLQodC/0LDRgdC40LHQviwg0LzRiyDRgdCy0Y/QttC10LzRgdGPINGBINCS0LDQvNC4IVwiO1xyXG4gICAgXHJcbiAgICAgICAgZnVuY3Rpb24gZ29vZGJ5KCkge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb3JlX19mb3JtJykuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgICAgaGVhZGVyQ292ZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICAgIGJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnc2Nyb2xsJztcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNldFRpbWVvdXQoZ29vZGJ5LCAyMDAwKTtcclxuICAgICAgICAgIFxyXG4gICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2FybmluZy1mJykudGV4dENvbnRlbnQgPSBcItCf0L7QttCw0LvRg9C50YHRgtCwINCy0LLQtdC00LjRgtC1INC/0YDQsNCy0LjQu9GM0L3Ri9C1INC00LDQvdC90YvQtVwiO1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3YXJuaW5nLWYnKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG5cclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuXHJcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3YXJuaW5nLWYnKS50ZXh0Q29udGVudCA9IFwi0J/QvtC20LDQu9GD0LnRgdGC0LAg0LTQsNC50YLQtSDRgdCy0L7QtSDRgdC+0LPQu9Cw0YHQuNC1INC90LAg0L7QsdGA0LDQsdC+0YLQutGDINC/0LXRgNGB0L7QvdCw0LvRjNC90YvRhSDQtNCw0L3QvdGL0YVcIjtcclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dhcm5pbmctZicpLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcblxyXG4gICAgfVxyXG4gIH0pXHJcbn0gKi9cclxuXHJcbi8vIEhlcm8tc2VjdGlvbiDQkNC90LjQvNCw0YbQuNGPINC/0L7Rj9Cy0LvQtdC90LjRj1xyXG5cclxuZnVuY3Rpb24gYW5pbVN0YXJ0ICgpIHtcclxuXHJcbiAgbGV0IG0xID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlcm9fX21vZHVsZTAxJyksXHJcbiAgICBtMiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZXJvX19tb2R1bGUwMicpLFxyXG4gICAgbTMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVyb19fbW9kdWxlMDMnKSxcclxuICAgIG00ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlcm9fX21vZHVsZTA0JyksXHJcbiAgICBiaWdPYmcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVyb19fYmlnb2JqJyksXHJcbiAgICBmb2cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVyb19fZm9nJyksXHJcbiAgICBibHVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlcm9fX2JsdXInKSxcclxuICAgIGFsZXJ0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlcm9fX2FsZXJ0Jyk7XHJcbiAgbTEuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJtb2R1bGUwMVwiKTtcclxuICBtMi5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcIm1vZHVsZTAyXCIpO1xyXG4gIG0zLnNldEF0dHJpYnV0ZShcImlkXCIsIFwibW9kdWxlMDNcIik7XHJcbiAgbTQuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJtb2R1bGUwNFwiKTtcclxuICBiaWdPYmcuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJiaWdkZXZpY2VcIik7XHJcbiAgZm9nLnNldEF0dHJpYnV0ZShcImlkXCIsIFwiZm9nXCIpO1xyXG4gIGJsdXIuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJibHVyXCIpO1xyXG4gIHNldFRpbWVvdXQoYWxlcnRTdGFydCwgMjAwMCk7XHJcblxyXG4gIGZ1bmN0aW9uIGFsZXJ0U3RhcnQoKSB7XHJcblxyXG4gICAgYWxlcnQuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJhbGVydF9zdGFydFwiKTtcclxuXHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIGFuaW1TdGFydCk7XHJcblxyXG4gIH1cclxufVxyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhbmltU3RhcnQpO1xyXG5cclxuLy8g0LfQsNC60YDRi9GC0LjQtSDQvtC60L3QsCDQv9GA0L4g0LrRg9C60LhcclxuXHJcbmZ1bmN0aW9uIGFsZXJ0U3RhcnQoZXYpIHtcclxuXHJcbiAgYWxlcnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVyb19fYWxlcnQnKTtcclxuXHJcbiAgY29uc3QgYXJlYSA9IGV2LnRhcmdldC5jbG9zZXN0KFwiI3N1YlwiKTtcclxuICAgIFxyXG4gIGlmIChhcmVhKSB7IFxyXG5cclxuICAgIGFsZXJ0LnJlbW92ZUF0dHJpYnV0ZShcImlkXCIsIFwiYWxlcnRfc3RhcnRcIik7XHJcblxyXG4gIH1cclxufVxyXG5cclxuYm9keS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFsZXJ0U3RhcnQpO1xyXG5cclxuXHJcbi8vYWNjb3JkZW9uXHJcblxyXG5sZXQgYWNjb3JkZW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnF1ZXN0aW9uc19fcGFydDInKSxcclxuICAgIHRhYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5xdWVzdGlvbnNfX2Jsb2NrJyksXHJcbiAgICBidXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucXVlc3Rpb25zX190b2Zvcm0nKSxcclxuICAgIGFycm93cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5xdWVzdGlvbnNfX3RvZm9ybScpLFxyXG4gICAgY291bnQ7XHJcblxyXG5mdW5jdGlvbiBjbGljazEoZSkge1xyXG4gICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQuY2xvc2VzdCgnLnF1ZXN0aW9uc19fYmxvY2snKTtcclxuICBpZiAodGFyZ2V0KSB7XHJcbiAgICAgIFxyXG4gICAgdGFiLmZvckVhY2goKGl0ZW0sIGkpID0+IHtcclxuXHJcbiAgICAgIGxldCBjaGlsZCA9IGl0ZW0uZmlyc3RFbGVtZW50Q2hpbGQubGFzdEVsZW1lbnRDaGlsZDtcclxuICBcclxuICAgICAgaWYgKGl0ZW0gPT09IHRhcmdldCkge1xyXG5cclxuICAgICAgICBcclxuICAgICAgICBpZiAoaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoJ21hcmsnKSkge1xyXG5cclxuICAgICAgICAgIGlmIChjb3VudCA9PSAxKSB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIGNoaWxkLnJlbW92ZUF0dHJpYnV0ZShcImlkXCIsIFwiYmxvY2stYWN0LS1pblwiKTtcclxuICAgICAgICAgICAgY2hpbGQuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJibG9jay1hY3QtLW91dFwiKTtcclxuICAgICAgICAgICAgaXRlbS5sYXN0RWxlbWVudENoaWxkLnN0eWxlLnRyYW5zZm9ybSA9ICdyb3RhdGUoMGRlZyknICsgJ3RyYW5zbGF0ZSgwLCAtNTAlKSc7XHJcbiAgICAgICAgICAgIGl0ZW0ubGFzdEVsZW1lbnRDaGlsZC5zdHlsZS50b3AgPSAnNTAlJztcclxuICAgICAgICAgICAgY291bnQrK1xyXG5cclxuICAgICAgICAgIH0gZWxzZSBpZiAoY291bnQgPT0gMikge1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICBjaGlsZC5yZW1vdmVBdHRyaWJ1dGUoXCJpZFwiLCBcImJsb2NrLWFjdC0tb3V0XCIpO1xyXG4gICAgICAgICAgICBjaGlsZC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImJsb2NrLWFjdC0taW5cIik7XHJcbiAgICAgICAgICAgIGl0ZW0ubGFzdEVsZW1lbnRDaGlsZC5zdHlsZS50cmFuc2Zvcm0gPSAncm90YXRlKDE4MGRlZyknICsgJ3RyYW5zbGF0ZSgwLCAwKSc7XHJcbiAgICAgICAgICAgIGl0ZW0ubGFzdEVsZW1lbnRDaGlsZC5zdHlsZS50b3AgPSAnMzBweCc7XHJcbiAgICAgICAgICAgIGNvdW50LS1cclxuXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICBjaGlsZC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImJsb2NrLWFjdC0taW5cIik7XHJcbiAgICAgICAgICBjb3VudCA9IDA7XHJcbiAgICAgICAgICBjb3VudCsrO1xyXG4gICAgICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKCdtYXJrJyk7XHJcbiAgICAgICAgICBpdGVtLmxhc3RFbGVtZW50Q2hpbGQuc3R5bGUudHJhbnNmb3JtID0gJ3JvdGF0ZSgxODBkZWcpJyArICd0cmFuc2xhdGUoMCwgMCknO1xyXG4gICAgICAgICAgaXRlbS5sYXN0RWxlbWVudENoaWxkLnN0eWxlLnRvcCA9ICczMHB4JztcclxuICAgICAgICB9XHJcbiAgICAgIH0gXHJcbiAgICB9KVxyXG4gIH07XHJcbn07XHJcbmFjY29yZGVvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICBjbGljazEoZSk7XHJcbn0pO1xyXG5cclxuXHJcblxyXG5cclxuXHJcbi8v0J/RgNC+0LjQs9GA0YvQstCw0YLQtdC70YxcclxuXHJcblxyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICB2YXIgdGFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcbiAgICB0YWcuc3JjID0gXCJodHRwczovL3d3dy55b3V0dWJlLmNvbS9pZnJhbWVfYXBpXCI7XHJcbiAgICB2YXIgZmlyc3RTY3JpcHRUYWcgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0JylbMF07XHJcbiAgICBmaXJzdFNjcmlwdFRhZy5wYXJlbnROb2RlLmluc2VydEJlZm9yZSh0YWcsIGZpcnN0U2NyaXB0VGFnKTtcclxuXHJcbiAgICB2YXIgcGxheWVyO1xyXG5cclxuICAgIGxldCB5dENyb3NzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Zjcm9zczEnKSxcclxuICAgICAgICBiYWNrZ3JvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ZmcmFtZTEnKSxcclxuICAgICAgICB5dEJhY2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY292ZXInKSxcclxuICAgICAgICBtYXJrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnZpZGVvX19saW5rJyksXHJcbiAgICAgICAgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKTtcclxuXHJcbiAgICBtYXJrLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICBiYWNrZ3JvLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgICAgIHl0QmFjay5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgICAgICBib2R5LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XHJcbiAgICAgICAgcGxheWVyID0gbmV3IFlULlBsYXllcigncGxheWVyJywge1xyXG4gICAgICAgICAgICBoZWlnaHQ6ICcxMDgwJyxcclxuICAgICAgICAgICAgd2lkdGg6ICcxMDAlJyxcclxuICAgICAgICAgICAgdmlkZW9JZDogbWFyay5kYXRhc2V0LnZpZGVvLC8v0LjQtyDQsNGC0YDQuNCx0YPRgtCwIGRhdGEtdmlkZW8g0LrQvdC+0L/QutC4XHJcbiAgICAgICAgICAgIHBsYXllclZhcnM6IHsgJ2F1dG9wbGF5JzogMSwgJ2NvbnRyb2xzJzogMSB9LFxyXG4gICAgICAgICAgICBldmVudHM6IHtcclxuICAgICAgICAgICAgICAgICdvblJlYWR5Jzogb25QbGF5ZXJSZWFkeSxcclxuICAgICAgICAgICAgICAgICdvblN0YXRlQ2hhbmdlJzogb25QbGF5ZXJTdGF0ZUNoYW5nZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIG9uUGxheWVyUmVhZHkoZXZlbnQpIHtcclxuICAgICAgICAgICAgZXZlbnQudGFyZ2V0LnNldFZvbHVtZSgzMCk7XHJcbiAgICAgICAgICAgIGV2ZW50LnRhcmdldC5wbGF5VmlkZW8oKTtcclxuICAgICAgICAgICAgZXZlbnQudGFyZ2V0LnNldFBsYXliYWNrUXVhbGl0eSgnaGlnaHJlcycpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gb25QbGF5ZXJTdGF0ZUNoYW5nZShldmVudCkge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnQuZGF0YSA9PSBZVC5QbGF5ZXJTdGF0ZS5CVUZGRVJJTkcpIHtcclxuICAgICAgICAgICAgICAgIGV2ZW50LnRhcmdldC5zZXRQbGF5YmFja1F1YWxpdHkoJ2hpZ2hyZXMnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgbGV0IHl0YmdBcnIgPSBbeXRCYWNrLCB5dENyb3NzXTtcclxuICAgIHl0YmdBcnIuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICAgICAgYmFja2dyby5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgeXRCYWNrLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICBib2R5LnN0eWxlLm92ZXJmbG93ID0gJ3Njcm9sbCc7XHJcbiAgICAgICAgICAgIHBsYXllci5kZXN0cm95KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufSlcclxuXHJcblxyXG4vLy0gc3dpcGVyXHJcblxyXG5jb25zdCBzd2lwZXIgPSBuZXcgU3dpcGVyKCcuc3dpcGVyJywge1xyXG4gICAgLy8g0J3QsNGB0YLRgNC+0LnQutC4IFN3aXBlclxyXG4gICAgbG9vcDogdHJ1ZSwgLy8g0JHQtdGB0LrQvtC90LXRh9C90LDRjyDQv9GA0L7QutGA0YPRgtC60LBcclxuICAgIHBhZ2luYXRpb246IHtcclxuICAgICAgICBlbDogJy5zbGlkZXJfX3BhZ2luYXRpb24nLFxyXG4gICAgICAgIGNsaWNrYWJsZTogdHJ1ZSwgLy8g0JTQtdC70LDQtdGCINC/0LDQs9C40L3QsNGG0LjRjiDQutC70LjQutCw0LHQtdC70YzQvdC+0LlcclxuICAgIH0sXHJcbiAgICBuYXZpZ2F0aW9uOiB7XHJcbiAgICAgICAgbmV4dEVsOiAnLnNsaWRlcl9fYnRuLW5leHQnLFxyXG4gICAgICAgIHByZXZFbDogJy5zbGlkZXJfX2J0bi1wcmV2JyxcclxuICAgIH0sXHJcbn0pO1xyXG5cclxuXHJcblxyXG4vL9Cf0LvQsNCy0L3QsNGPINC/0YDQvtC60YDRg9GC0LrQsCDQtNC+INGB0YHRi9C70L7QulxyXG5cclxuXHJcblxyXG5mdW5jdGlvbiBUZXN0RHJpdmVGbigpIHtcclxuICAgIC8vZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rlc3Rkcml2ZScpLnNjcm9sbEludG9WaWV3KHtcclxuICAgICAgICBibG9jazogXCJzdGFydFwiLFxyXG4gICAgICAgIGJlaGF2aW9yOiAnc21vb3RoJ1xyXG4gICAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gZGVjaXNpb25zRm4oKSB7XHJcbiAgICAvL2UucHJldmVudERlZmF1bHQoKTtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZWNpc2lvbnMnKS5zY3JvbGxJbnRvVmlldyh7XHJcbiAgICAgICAgYmxvY2s6IFwic3RhcnRcIixcclxuICAgICAgICBiZWhhdmlvcjogJ3Ntb290aCdcclxuICAgIH0pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGxlYXJuaW5nRm4oKSB7XHJcbiAgICAvL2UucHJldmVudERlZmF1bHQoKTtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsZWFybmluZycpLnNjcm9sbEludG9WaWV3KHtcclxuICAgICAgICBibG9jazogXCJzdGFydFwiLFxyXG4gICAgICAgIGJlaGF2aW9yOiAnc21vb3RoJ1xyXG4gICAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gdHJ1c3RGbigpIHtcclxuICAgIC8vZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RydXN0Jykuc2Nyb2xsSW50b1ZpZXcoe1xyXG4gICAgICAgIGJsb2NrOiBcInN0YXJ0XCIsXHJcbiAgICAgICAgYmVoYXZpb3I6ICdzbW9vdGgnXHJcbiAgICB9KVxyXG59XHJcblxyXG5mdW5jdGlvbiBxdWVzdGlvbnNGbigpIHtcclxuICAgIC8vZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3F1ZXN0aW9ucycpLnNjcm9sbEludG9WaWV3KHtcclxuICAgICAgICBibG9jazogXCJzdGFydFwiLFxyXG4gICAgICAgIGJlaGF2aW9yOiAnc21vb3RoJ1xyXG4gICAgfSlcclxufVxyXG5cclxuXHJcblxyXG5cclxuIl19