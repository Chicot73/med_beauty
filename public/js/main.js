var alert=document.querySelector(".hero__alert"),body=document.body||document.getElementsByTagName("body")[0];function alertStart(){alert.setAttribute("id","alert_start"),body.style.overflow="hidden"}function animateHero(){var e=document.querySelector(".hero__module01"),t=document.querySelector(".hero__module02"),o=document.querySelector(".hero__module03"),n=document.querySelector(".hero__module04"),r=document.querySelector(".hero__bigobj"),l=document.querySelector(".hero__fog"),c=document.querySelector(".hero__blur");e.setAttribute("id","module01"),t.setAttribute("id","module02"),o.setAttribute("id","module03"),n.setAttribute("id","module04"),r.setAttribute("id","bigdevice"),l.setAttribute("id","fog"),c.setAttribute("id","blur")}function alertFinish(e){var t=e.target.closest("#sub"),e=e.target.closest("#unsub");(t||e)&&(alert.removeAttribute("id","alert_start"),animateHero(),document.removeEventListener("scroll",alertStart),body.style.overflow="scroll")}document.addEventListener("click",alertFinish),document.addEventListener("scroll",alertStart);var langwRandome=document.querySelector(".header__chose-lang"),randomePot=document.querySelector(".header__randome"),langwText=langwRandome.firstElementChild,counter=0;function inn(){randomePot.setAttribute("id","list-start")}function listener(e){var t,o,e=e.target;e&&(t=o=e.textContent,o=langwText.textContent,langwText.textContent=t,e.textContent=o,setTimeout(function(){randomePot.removeAttribute("id","list-start")},200))}langwRandome.addEventListener("mouseover",inn),langwRandome.addEventListener("click",inn),randomePot.addEventListener("mouseout",function(){randomePot.removeAttribute("id","list-start")});var count,accordeon=document.querySelector(".questions__part2"),tab=document.querySelectorAll(".questions__block"),button=document.querySelectorAll(".questions__toform"),arrows=document.querySelectorAll(".questions__toform");function click1(e){var o=e.target.closest(".questions__block");o&&tab.forEach(function(e){var t=e.firstElementChild.lastElementChild;e===o&&(e.classList.contains("mark")?1==count?(t.removeAttribute("id","block-act--in"),t.setAttribute("id","block-act--out"),e.lastElementChild.style.transform="rotate(0deg)translate(0, -50%)",e.lastElementChild.style.top="50%",count++):2==count&&(t.removeAttribute("id","block-act--out"),t.setAttribute("id","block-act--in"),e.lastElementChild.style.transform="rotate(180deg)translate(0, 0)",e.lastElementChild.style.top="30px",count--):(t.setAttribute("id","block-act--in"),count=0,count++,e.classList.add("mark"),e.lastElementChild.style.transform="rotate(180deg)translate(0, 0)",e.lastElementChild.style.top="30px"))})}accordeon.addEventListener("click",function(e){click1(e)}),document.addEventListener("DOMContentLoaded",function(){var t,e=document.createElement("script"),o=(e.src="https://www.youtube.com/iframe_api",document.getElementsByTagName("script")[0]),e=(o.parentNode.insertBefore(e,o),document.getElementById("vcross1")),n=document.getElementById("vframe1"),r=document.querySelector(".cover"),l=document.querySelector(".video__link"),c=document.querySelector("body");l.addEventListener("click",function(e){n.classList.add("active"),r.classList.add("active"),c.style.overflow="hidden",t=new YT.Player("player",{height:"1080",width:"100%",videoId:l.dataset.video,playerVars:{autoplay:1,controls:1},events:{onReady:function(e){e.target.setVolume(30),e.target.playVideo(),e.target.setPlaybackQuality("highres")},onStateChange:function(e){e.data==YT.PlayerState.BUFFERING&&e.target.setPlaybackQuality("highres")}}})}),[r,e].forEach(function(e){e.addEventListener("click",function(e){n.classList.remove("active"),r.classList.remove("active"),c.style.overflow="scroll",t.destroy()})})});var swiper=new Swiper(".swiper",{loop:!0,pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".slider__btn-next",prevEl:".slider__btn-prev"}});function TestDriveFn(){document.getElementById("testdrive").scrollIntoView({block:"start",behavior:"smooth"})}function decisionsFn(){document.getElementById("decisions").scrollIntoView({block:"start",behavior:"smooth"})}function learningFn(){document.getElementById("learning").scrollIntoView({block:"start",behavior:"smooth"})}function trustFn(){document.getElementById("trust").scrollIntoView({block:"start",behavior:"smooth"})}function questionsFn(){document.getElementById("questions").scrollIntoView({block:"start",behavior:"smooth"})}function moreFn(){document.getElementById("form-down").scrollIntoView({block:"start",behavior:"smooth"})}var burgerMenu=document.querySelector(".header__burger"),burgerBtn=document.querySelector(".header__burger-btn"),burgerCloseBtn=document.querySelector(".header__cross"),headerCover=document.querySelector(".header__cover"),burgerLinks=document.getElementById("header_links"),upForm=document.querySelector(".header__form"),burgerGetinfo=document.querySelector(".header__form-btn"),closeBurger=(burgerBtn.addEventListener("click",function(e){burgerMenu.classList.contains("header__burger--out")&&burgerMenu.classList.remove("header__burger--out"),burgerMenu.classList.add("header__burger--in"),headerCover.style.display="block",body.style.overflow="hidden",e.stopImmediatePropagation()}),function(){burgerMenu.classList.remove("header__burger--in"),headerCover.style.display="none",body.style.overflow="scroll"}),f_formSucess=(document.addEventListener("click",function(e){var t=e.composedPath().includes(burgerMenu),o=e.composedPath().includes(burgerGetinfo),n=!1,r=e.composedPath().includes(upForm);o&&(burgerMenu.classList.remove("header__burger--in"),upForm.style.display="block"),t||(n=!0),[e.composedPath().includes(burgerCloseBtn),e.composedPath().includes(burgerLinks)].forEach(function(e){e&&closeBurger()}),!0!==n||r||(upForm.style.display="none",closeBurger())}),!1),f_submit=!1,telSelector=document.getElementById("phone"),nameSelector=document.getElementById("name"),questionSelector=document.getElementById("question"),telValid=new Inputmask({mask:"+*{1,20}",greedy:!1,definitions:{"*":{validator:"[0-9()-]"}}}),validForm=(telValid.mask(telSelector),function(e){var t=telSelector.value,o=nameSelector.value,n=questionSelector.value,t=t.replace(/[^0-9]/g,"");document.getElementById("agree").checked?2<t.length&&t.length<50&&1<o.length&&o.length<36&&2<n.length&&n.length<1501?(document.getElementById("warning").style.display="block",document.getElementById("warning").style.color="#49ff0c",document.getElementById("warning").textContent="Спасибо, мы свяжемся с Вами!",setTimeout(function(){upForm.submit(e),sendForm(e),f_submit=!0,closeBurger(),document.getElementById("warning").style.display="none"},2e3),setTimeout(function(){document.querySelector(".header__form").style.display="none",headerCover.style.display="none",body.style.overflow="scroll"},2e3),console.log("валидация прошла успешно")):(console.log("форма не прошла по валидации"),document.getElementById("warning").textContent="Пожалуйста введите правильные данные",document.getElementById("warning").style.display="block"):(console.log("форма не прошла по валидации"),document.getElementById("warning").textContent="Пожалуйста дайте свое согласие на обработку персональных данных",document.getElementById("warning").style.display="block")}),sendForm=function(){document.addEventListener("submit",function(e){var t,o;e.preventDefault,!0===f_formSucess&&(t=new FormData(e.target),o={},t.forEach(function(e,t){o[t]=e}),fetch("finish.php",{method:"POST",body:JSON.stringify(o),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(function(e){return e.json()}).then(function(e){console.log("Письмо ушло")}),e.target.reset(),f_formSucess=!1)})};document.addEventListener("click",function(e){e.target.closest(".form__btn")&&validForm(e)});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiYWxlcnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJib2R5IiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJhbGVydFN0YXJ0Iiwic3R5bGUiLCJvdmVyZmxvdyIsImJpZ09iZyIsImZvZyIsImJsdXIiLCJtNCIsInNldEF0dHJpYnV0ZSIsImFuaW1hdGVIZXJvIiwiZXYiLCJhcmVhIiwiY2xvc2VzdCIsImFyZWEyIiwidGFyZ2V0IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUF0dHJpYnV0ZSIsImxhbmd3UmFuZG9tZSIsInJhbmRvbWVQb3QiLCJhbGVydEZpbmlzaCIsImxhbmd3VGV4dCIsImZpcnN0RWxlbWVudENoaWxkIiwiY291bnRlciIsImxpc3RlbmVyIiwiZXZlbnQiLCJhIiwiZWwiLCJ0ZXh0Q29udGVudCIsImNoaWxkIiwiZm9yRWFjaCIsInNldFRpbWVvdXQiLCJpbm4iLCJjb3VudCIsImFjY29yZGVvbiIsInRhYiIsImNsYXNzTGlzdCIsImJ1dHRvbiIsIml0ZW0iLCJsYXN0RWxlbWVudENoaWxkIiwiYXJyb3dzIiwiY2xpY2sxIiwiZSIsImNvbnRhaW5zIiwiZmlyc3RTY3JpcHRUYWciLCJwYXJlbnROb2RlIiwiaW5zZXJ0QmVmb3JlIiwieXRDcm9zcyIsImdldEVsZW1lbnRCeUlkIiwidHJhbnNmb3JtIiwidG9wIiwiWVQiLCJldmVudHMiLCJhZGQiLCJvblBsYXllclN0YXRlQ2hhbmdlIiwic2V0UGxheWJhY2tRdWFsaXR5IiwieXRCYWNrIiwicmVtb3ZlIiwicGxheWVyIiwiY3JlYXRlRWxlbWVudCIsInRhZyIsInNyYyIsInN3aXBlciIsImJhY2tncm8iLCJsb29wIiwibWFyayIsInBhZ2luYXRpb24iLCJjbGlja2FibGUiLCJuYXZpZ2F0aW9uIiwibmV4dEVsIiwicHJldkVsIiwiUGxheWVyIiwiaGVpZ2h0Iiwid2lkdGgiLCJ2aWRlb0lkIiwiZGF0YXNldCIsInZpZGVvIiwicGxheWVyVmFycyIsImF1dG9wbGF5IiwiY29udHJvbHMiLCJvblJlYWR5Iiwic2V0Vm9sdW1lIiwiZGVjaXNpb25zRm4iLCJvblN0YXRlQ2hhbmdlIiwiYmVoYXZpb3IiLCJkYXRhIiwiUGxheWVyU3RhdGUiLCJCVUZGRVJJTkciLCJibG9jayIsInRydXN0Rm4iLCJkZXN0cm95IiwiU3dpcGVyIiwibW9yZUZuIiwiVGVzdERyaXZlRm4iLCJidXJnZXJCdG4iLCJzY3JvbGxJbnRvVmlldyIsImJ1cmdlck1lbnUiLCJoZWFkZXJDb3ZlciIsImxlYXJuaW5nRm4iLCJjbG9zZUJ1cmdlciIsImZvcm1CdG5DbGlja2VkIiwiY29tcG9zZWRQYXRoIiwiYnVyZ2VyR2V0aW5mbyIsIm5vRmllbGQiLCJGaWVsZEZvcm0iLCJxdWVzdGlvbnNGbiIsInVwRm9ybSIsInB1QXJyIiwiYnVyZ2VyQ2xvc2VCdG4iLCJidXJnZXJMaW5rcyIsInRlbFZhbGlkIiwiZl9mb3JtU3VjZXNzIiwidGVsU2VsZWN0b3IiLCJuYW1lU2VsZWN0b3IiLCJkaXNwbGF5IiwiZ3JlZWR5IiwidmFsaWRGb3JtIiwidmFsdWUiLCJsb25nMiIsImxvbmdOdW0iLCJtQnVyZ2VyIiwic3VibWl0IiwiaW5jbHVkZXMiLCJmX3N1Ym1pdCIsInJlc2V0IiwicXVlc3Rpb25TZWxlY3RvciIsIklucHV0bWFzayIsIm1hc2siLCJkZWZpbml0aW9ucyIsIioiLCJ2YWxpZGF0b3IiLCJsb25nIiwibG9uZzMiLCJyZXBsYWNlIiwiY2hlY2tlZCIsImxlbmd0aCIsImNvbG9yIiwic2VuZEZvcm0iLCJjb25zb2xlIiwibG9nIiwiZGF0YUZvcm0iLCJ1c2VyIiwicHJldmVudERlZmF1bHQiLCJGb3JtRGF0YSIsInZhbCIsImtleSIsImZldGNoIiwibWV0aG9kIiwiSlNPTiIsInN0cmluZ2lmeSIsImhlYWRlcnMiLCJDb250ZW50LXR5cGUiLCJ0aGVuIiwicmVzIiwianNvbiJdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQUEsTUFBQUMsU0FBQUMsY0FBQSxjQUFBLEVBR0VDLEtB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Q2tILEVBQUtDLEdBQ3JCSixFQUFLSSxHQUFPRCxDQUNkLENBQUMsRUFkUUUsTUFBTSxhQUFjLENBQ3pCQyxPQUFRLE9BQ1JuSixLQUFNb0osS0FBS0MsVUFhTlIsQ0Fib0IsRUFDekJTLFFBQVMsQ0FDUEMsZUFBZ0IsaUNBQ2xCLENBQ0YsQ0FBQyxFQUFFQyxLQUFLLFNBQUFDLEdBQUcsT0FBSUEsRUFBSUMsS0FBSyxDQUFDLENBQUEsRUFTWkYsS0FBSyxTQUFBbkUsR0FDbEJxRCxRQUFRQyxJQUFJLGFBQWEsQ0FDM0IsQ0FBQyxFQUVEakcsRUFBRTNCLE9BQU82RyxNQUFNLEVBRWZiLGFBQWUsQ0FBQSxFQUVuQixDQUFDLENBQ0gsRUFFQWpILFNBQVNrQixpQkFBaUIsUUFBUyxTQUFDMEIsR0FFaEJBLEVBQUUzQixPQUFPRixRQUFRLFlBQVksR0FJN0N1RyxVQUFVMUUsQ0FBQyxDQUdmLENBQUMiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIEhlcm8tc2VjdGlvbiDQkNC90LjQvNCw0YbQuNGPINC/0L7Rj9Cy0LvQtdC90LjRj1xyXG5cclxuY29uc3QgYWxlcnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVyb19fYWxlcnQnKSxcclxuICBib2R5ID0gZG9jdW1lbnQuYm9keSB8fCBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYm9keScpWzBdO1xyXG5cclxuXHJcbmZ1bmN0aW9uIGFsZXJ0U3RhcnQoKSB7XHJcblxyXG4gIGFsZXJ0LnNldEF0dHJpYnV0ZShcImlkXCIsIFwiYWxlcnRfc3RhcnRcIik7XHJcbiAgYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xyXG5cclxufVxyXG5cclxuZnVuY3Rpb24gYW5pbWF0ZUhlcm8oKSB7XHJcblxyXG4gIGxldCBtMSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZXJvX19tb2R1bGUwMScpLFxyXG4gICAgbTIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVyb19fbW9kdWxlMDInKSxcclxuICAgIG0zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlcm9fX21vZHVsZTAzJyksXHJcbiAgICBtNCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZXJvX19tb2R1bGUwNCcpLFxyXG4gICAgYmlnT2JnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlcm9fX2JpZ29iaicpLFxyXG4gICAgZm9nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlcm9fX2ZvZycpLFxyXG4gICAgYmx1ciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZXJvX19ibHVyJyk7XHJcbiAgbTEuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJtb2R1bGUwMVwiKTtcclxuICBtMi5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcIm1vZHVsZTAyXCIpO1xyXG4gIG0zLnNldEF0dHJpYnV0ZShcImlkXCIsIFwibW9kdWxlMDNcIik7XHJcbiAgbTQuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJtb2R1bGUwNFwiKTtcclxuICBiaWdPYmcuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJiaWdkZXZpY2VcIik7XHJcbiAgZm9nLnNldEF0dHJpYnV0ZShcImlkXCIsIFwiZm9nXCIpO1xyXG4gIGJsdXIuc2V0QXR0cmlidXRlKFwiaWRcIiwgXCJibHVyXCIpO1xyXG4gIC8vc2V0VGltZW91dChhbGVydFN0YXJ0LCAyMDAwKTtcclxufVxyXG5cclxuLy8g0LfQsNC60YDRi9GC0LjQtSDQvtC60L3QsCDQv9GA0L4g0LrRg9C60LhcclxuXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYWxlcnRGaW5pc2gpO1xyXG5cclxuZnVuY3Rpb24gYWxlcnRGaW5pc2goZXYpIHtcclxuXHJcbiAgY29uc3QgYXJlYSA9IGV2LnRhcmdldC5jbG9zZXN0KFwiI3N1YlwiKTtcclxuICBjb25zdCBhcmVhMiA9IGV2LnRhcmdldC5jbG9zZXN0KFwiI3Vuc3ViXCIpO1xyXG5cclxuICBpZiAoKGFyZWEpIHx8IChhcmVhMikpIHtcclxuXHJcbiAgICBhbGVydC5yZW1vdmVBdHRyaWJ1dGUoXCJpZFwiLCBcImFsZXJ0X3N0YXJ0XCIpO1xyXG4gICAgYW5pbWF0ZUhlcm8oKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGFsZXJ0U3RhcnQpO1xyXG4gICAgYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdzY3JvbGwnO1xyXG4gIH1cclxufVxyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgYWxlcnRTdGFydCk7XHJcblxyXG5cclxuLy/QstGL0LHQvtGAINGP0LfRi9C60LBcclxuXHJcbmxldCBsYW5nd1JhbmRvbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19jaG9zZS1sYW5nJyksXHJcbiAgcmFuZG9tZVBvdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX3JhbmRvbWUnKSxcclxuICBsYW5nd1RleHQgPSBsYW5nd1JhbmRvbWUuZmlyc3RFbGVtZW50Q2hpbGQsXHJcbiAgY291bnRlciA9IDA7XHJcblxyXG5sYW5nd1JhbmRvbWUuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdmVyJywgaW5uKTtcclxubGFuZ3dSYW5kb21lLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaW5uKTtcclxuXHJcbmZ1bmN0aW9uIGlubigpIHtcclxuICByYW5kb21lUG90LnNldEF0dHJpYnV0ZShcImlkXCIsIFwibGlzdC1zdGFydFwiKTtcclxufVxyXG5cclxucmFuZG9tZVBvdC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW91dCcsICgpID0+IHtcclxuICByYW5kb21lUG90LnJlbW92ZUF0dHJpYnV0ZShcImlkXCIsIFwibGlzdC1zdGFydFwiKTtcclxufSlcclxuXHJcblxyXG5cclxuXHJcblxyXG4vL9GE0YPQvdC60YbQuNGPINC90LUg0YDQsNCx0L7RgtCw0LXRgiwg0LXRgdC70Lgg0L3QtSDQv9C+0LLQtdGB0LjRgtGMIG9uY2xpY2sg0L3QsCDQutCw0LbQtNGD0Y4g0LrQvdC+0L/QutGDINCyINGB0L/QuNGB0LrQtSAo0L3QtSDRh9C10YDQtdC3IGFkZGV2bGlzLCDQsCDRh9C10YDQtdC3INGC0LXQsyBvbmNsaWNrKVxyXG5mdW5jdGlvbiBsaXN0ZW5lcihldmVudCkge1xyXG4gIGxldCBlbCA9IGV2ZW50LnRhcmdldDtcclxuXHJcbiAgaWYgKGVsKSB7XHJcblxyXG4gICAgbGV0IGEgPSBlbC50ZXh0Q29udGVudCxcclxuICAgICAgYiA9IGxhbmd3VGV4dC50ZXh0Q29udGVudDtcclxuXHJcbiAgICBsZXQgdG1wID0gYTtcclxuICAgIGEgPSBiO1xyXG4gICAgYiA9IHRtcDtcclxuICAgIGxhbmd3VGV4dC50ZXh0Q29udGVudCA9IGI7XHJcbiAgICBlbC50ZXh0Q29udGVudCA9IGE7XHJcblxyXG4gICAgZnVuY3Rpb24gZ29vZGJ5KCkge1xyXG5cclxuICAgICAgcmFuZG9tZVBvdC5yZW1vdmVBdHRyaWJ1dGUoXCJpZFwiLCBcImxpc3Qtc3RhcnRcIik7XHJcblxyXG4gICAgfVxyXG4gICAgc2V0VGltZW91dChnb29kYnksIDIwMCk7XHJcbiAgfVxyXG59XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbi8vYWNjb3JkZW9uXHJcblxyXG5sZXQgYWNjb3JkZW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnF1ZXN0aW9uc19fcGFydDInKSxcclxuICB0YWIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucXVlc3Rpb25zX19ibG9jaycpLFxyXG4gIGJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5xdWVzdGlvbnNfX3RvZm9ybScpLFxyXG4gIGFycm93cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5xdWVzdGlvbnNfX3RvZm9ybScpLFxyXG4gIGNvdW50O1xyXG5cclxuZnVuY3Rpb24gY2xpY2sxKGUpIHtcclxuICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldC5jbG9zZXN0KCcucXVlc3Rpb25zX19ibG9jaycpO1xyXG4gIGlmICh0YXJnZXQpIHtcclxuXHJcbiAgICB0YWIuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG5cclxuICAgICAgbGV0IGNoaWxkID0gaXRlbS5maXJzdEVsZW1lbnRDaGlsZC5sYXN0RWxlbWVudENoaWxkO1xyXG5cclxuICAgICAgaWYgKGl0ZW0gPT09IHRhcmdldCkge1xyXG5cclxuXHJcbiAgICAgICAgaWYgKGl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCdtYXJrJykpIHtcclxuXHJcbiAgICAgICAgICBpZiAoY291bnQgPT0gMSkge1xyXG5cclxuICAgICAgICAgICAgY2hpbGQucmVtb3ZlQXR0cmlidXRlKFwiaWRcIiwgXCJibG9jay1hY3QtLWluXCIpO1xyXG4gICAgICAgICAgICBjaGlsZC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImJsb2NrLWFjdC0tb3V0XCIpO1xyXG4gICAgICAgICAgICBpdGVtLmxhc3RFbGVtZW50Q2hpbGQuc3R5bGUudHJhbnNmb3JtID0gJ3JvdGF0ZSgwZGVnKScgKyAndHJhbnNsYXRlKDAsIC01MCUpJztcclxuICAgICAgICAgICAgaXRlbS5sYXN0RWxlbWVudENoaWxkLnN0eWxlLnRvcCA9ICc1MCUnO1xyXG4gICAgICAgICAgICBjb3VudCsrXHJcblxyXG4gICAgICAgICAgfSBlbHNlIGlmIChjb3VudCA9PSAyKSB7XHJcblxyXG4gICAgICAgICAgICBjaGlsZC5yZW1vdmVBdHRyaWJ1dGUoXCJpZFwiLCBcImJsb2NrLWFjdC0tb3V0XCIpO1xyXG4gICAgICAgICAgICBjaGlsZC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImJsb2NrLWFjdC0taW5cIik7XHJcbiAgICAgICAgICAgIGl0ZW0ubGFzdEVsZW1lbnRDaGlsZC5zdHlsZS50cmFuc2Zvcm0gPSAncm90YXRlKDE4MGRlZyknICsgJ3RyYW5zbGF0ZSgwLCAwKSc7XHJcbiAgICAgICAgICAgIGl0ZW0ubGFzdEVsZW1lbnRDaGlsZC5zdHlsZS50b3AgPSAnMzBweCc7XHJcbiAgICAgICAgICAgIGNvdW50LS1cclxuXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICBjaGlsZC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBcImJsb2NrLWFjdC0taW5cIik7XHJcbiAgICAgICAgICBjb3VudCA9IDA7XHJcbiAgICAgICAgICBjb3VudCsrO1xyXG4gICAgICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKCdtYXJrJyk7XHJcbiAgICAgICAgICBpdGVtLmxhc3RFbGVtZW50Q2hpbGQuc3R5bGUudHJhbnNmb3JtID0gJ3JvdGF0ZSgxODBkZWcpJyArICd0cmFuc2xhdGUoMCwgMCknO1xyXG4gICAgICAgICAgaXRlbS5sYXN0RWxlbWVudENoaWxkLnN0eWxlLnRvcCA9ICczMHB4JztcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfTtcclxufTtcclxuYWNjb3JkZW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICBjbGljazEoZSk7XHJcbn0pO1xyXG5cclxuXHJcblxyXG5cclxuXHJcbi8v0J/RgNC+0LjQs9GA0YvQstCw0YLQtdC70YxcclxuXHJcblxyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgdmFyIHRhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xyXG4gIHRhZy5zcmMgPSBcImh0dHBzOi8vd3d3LnlvdXR1YmUuY29tL2lmcmFtZV9hcGlcIjtcclxuICB2YXIgZmlyc3RTY3JpcHRUYWcgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0JylbMF07XHJcbiAgZmlyc3RTY3JpcHRUYWcucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodGFnLCBmaXJzdFNjcmlwdFRhZyk7XHJcblxyXG4gIHZhciBwbGF5ZXI7XHJcblxyXG4gIGxldCB5dENyb3NzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Zjcm9zczEnKSxcclxuICAgIGJhY2tncm8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmZyYW1lMScpLFxyXG4gICAgeXRCYWNrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvdmVyJyksXHJcbiAgICBtYXJrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnZpZGVvX19saW5rJyksXHJcbiAgICBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xyXG5cclxuICBtYXJrLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgIGJhY2tncm8uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICB5dEJhY2suY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICBib2R5LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XHJcbiAgICBwbGF5ZXIgPSBuZXcgWVQuUGxheWVyKCdwbGF5ZXInLCB7XHJcbiAgICAgIGhlaWdodDogJzEwODAnLFxyXG4gICAgICB3aWR0aDogJzEwMCUnLFxyXG4gICAgICB2aWRlb0lkOiBtYXJrLmRhdGFzZXQudmlkZW8sLy/QuNC3INCw0YLRgNC40LHRg9GC0LAgZGF0YS12aWRlbyDQutC90L7Qv9C60LhcclxuICAgICAgcGxheWVyVmFyczogeyAnYXV0b3BsYXknOiAxLCAnY29udHJvbHMnOiAxIH0sXHJcbiAgICAgIGV2ZW50czoge1xyXG4gICAgICAgICdvblJlYWR5Jzogb25QbGF5ZXJSZWFkeSxcclxuICAgICAgICAnb25TdGF0ZUNoYW5nZSc6IG9uUGxheWVyU3RhdGVDaGFuZ2VcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgZnVuY3Rpb24gb25QbGF5ZXJSZWFkeShldmVudCkge1xyXG4gICAgICBldmVudC50YXJnZXQuc2V0Vm9sdW1lKDMwKTtcclxuICAgICAgZXZlbnQudGFyZ2V0LnBsYXlWaWRlbygpO1xyXG4gICAgICBldmVudC50YXJnZXQuc2V0UGxheWJhY2tRdWFsaXR5KCdoaWdocmVzJyk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gb25QbGF5ZXJTdGF0ZUNoYW5nZShldmVudCkge1xyXG4gICAgICBpZiAoZXZlbnQuZGF0YSA9PSBZVC5QbGF5ZXJTdGF0ZS5CVUZGRVJJTkcpIHtcclxuICAgICAgICBldmVudC50YXJnZXQuc2V0UGxheWJhY2tRdWFsaXR5KCdoaWdocmVzJyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9KVxyXG5cclxuICBsZXQgeXRiZ0FyciA9IFt5dEJhY2ssIHl0Q3Jvc3NdO1xyXG4gIHl0YmdBcnIuZm9yRWFjaChpdGVtID0+IHtcclxuICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICBiYWNrZ3JvLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgICB5dEJhY2suY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICAgIGJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnc2Nyb2xsJztcclxuICAgICAgcGxheWVyLmRlc3Ryb3koKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59KVxyXG5cclxuXHJcbi8vLSBzd2lwZXJcclxuXHJcbmNvbnN0IHN3aXBlciA9IG5ldyBTd2lwZXIoJy5zd2lwZXInLCB7XHJcbiAgLy8g0J3QsNGB0YLRgNC+0LnQutC4IFN3aXBlclxyXG4gIGxvb3A6IHRydWUsIC8vINCR0LXRgdC60L7QvdC10YfQvdCw0Y8g0L/RgNC+0LrRgNGD0YLQutCwXHJcbiAgcGFnaW5hdGlvbjoge1xyXG4gICAgZWw6ICcuc3dpcGVyLXBhZ2luYXRpb24nLFxyXG4gICAgY2xpY2thYmxlOiB0cnVlLCAvLyDQlNC10LvQsNC10YIg0L/QsNCz0LjQvdCw0YbQuNGOINC60LvQuNC60LDQsdC10LvRjNC90L7QuVxyXG4gIH0sXHJcbiAgbmF2aWdhdGlvbjoge1xyXG4gICAgbmV4dEVsOiAnLnNsaWRlcl9fYnRuLW5leHQnLFxyXG4gICAgcHJldkVsOiAnLnNsaWRlcl9fYnRuLXByZXYnLFxyXG4gIH0sXHJcbn0pO1xyXG5cclxuXHJcblxyXG4vL9Cf0LvQsNCy0L3QsNGPINC/0YDQvtC60YDRg9GC0LrQsCDQtNC+INGB0YHRi9C70L7QulxyXG5cclxuXHJcblxyXG5mdW5jdGlvbiBUZXN0RHJpdmVGbigpIHtcclxuICAvL2UucHJldmVudERlZmF1bHQoKTtcclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGVzdGRyaXZlJykuc2Nyb2xsSW50b1ZpZXcoe1xyXG4gICAgYmxvY2s6IFwic3RhcnRcIixcclxuICAgIGJlaGF2aW9yOiAnc21vb3RoJ1xyXG4gIH0pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRlY2lzaW9uc0ZuKCkge1xyXG4gIC8vZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZWNpc2lvbnMnKS5zY3JvbGxJbnRvVmlldyh7XHJcbiAgICBibG9jazogXCJzdGFydFwiLFxyXG4gICAgYmVoYXZpb3I6ICdzbW9vdGgnXHJcbiAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gbGVhcm5pbmdGbigpIHtcclxuICAvL2UucHJldmVudERlZmF1bHQoKTtcclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbGVhcm5pbmcnKS5zY3JvbGxJbnRvVmlldyh7XHJcbiAgICBibG9jazogXCJzdGFydFwiLFxyXG4gICAgYmVoYXZpb3I6ICdzbW9vdGgnXHJcbiAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gdHJ1c3RGbigpIHtcclxuICAvL2UucHJldmVudERlZmF1bHQoKTtcclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHJ1c3QnKS5zY3JvbGxJbnRvVmlldyh7XHJcbiAgICBibG9jazogXCJzdGFydFwiLFxyXG4gICAgYmVoYXZpb3I6ICdzbW9vdGgnXHJcbiAgfSlcclxufVxyXG5cclxuZnVuY3Rpb24gcXVlc3Rpb25zRm4oKSB7XHJcbiAgLy9lLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3F1ZXN0aW9ucycpLnNjcm9sbEludG9WaWV3KHtcclxuICAgIGJsb2NrOiBcInN0YXJ0XCIsXHJcbiAgICBiZWhhdmlvcjogJ3Ntb290aCdcclxuICB9KVxyXG59XHJcblxyXG5mdW5jdGlvbiBtb3JlRm4oKSB7XHJcbiAgLy9lLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Zvcm0tZG93bicpLnNjcm9sbEludG9WaWV3KHtcclxuICAgIGJsb2NrOiBcInN0YXJ0XCIsXHJcbiAgICBiZWhhdmlvcjogJ3Ntb290aCdcclxuICB9KVxyXG59XHJcblxyXG5cclxuXHJcblxyXG4vLyDQsdGD0YDQs9C10YAgLSDQvNC10L3RjlxyXG5cclxubGV0IGJ1cmdlck1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19idXJnZXInKSxcclxuICBidXJnZXJCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19idXJnZXItYnRuJyksXHJcbiAgYnVyZ2VyQ2xvc2VCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19jcm9zcycpLFxyXG4gIGhlYWRlckNvdmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9fY292ZXInKSwgLy/Qt9Cw0YLQtdC80L3QtdC90LjQtSDQvdCwINGE0L7QvdC1XHJcbiAgYnVyZ2VyTGlua3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGVhZGVyX2xpbmtzJyksXHJcbiAgdXBGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oZWFkZXJfX2Zvcm1cIiksXHJcbiAgYnVyZ2VyR2V0aW5mbyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX2Zvcm0tYnRuJyk7XHJcblxyXG5idXJnZXJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG5cclxuICBpZiAoYnVyZ2VyTWVudS5jbGFzc0xpc3QuY29udGFpbnMoJ2hlYWRlcl9fYnVyZ2VyLS1vdXQnKSkge1xyXG4gICAgYnVyZ2VyTWVudS5jbGFzc0xpc3QucmVtb3ZlKCdoZWFkZXJfX2J1cmdlci0tb3V0Jyk7XHJcbiAgfTtcclxuICBidXJnZXJNZW51LmNsYXNzTGlzdC5hZGQoJ2hlYWRlcl9fYnVyZ2VyLS1pbicpO1xyXG4gIGhlYWRlckNvdmVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gIGJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcclxuXHJcbiAgLy8gZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBub25Gb3JtQ2xpY2spO1xyXG5cclxuICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpXHJcbn0pO1xyXG5cclxuXHJcblxyXG4vLyDQm9C+0LPQuNC60LAg0L/QvtGB0LvQtSDQvtGC0LrRgNGL0YLQuNGPINCx0YPRgNCz0LXRgCAtINC80LXQvdGOLCDQtdGB0LvQuCDRhdC+0YLRj9GCINC30LDQutGA0YvRgtGMINC10LPQvlxyXG5cclxubGV0IGNsb3NlQnVyZ2VyID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICBidXJnZXJNZW51LmNsYXNzTGlzdC5yZW1vdmUoJ2hlYWRlcl9fYnVyZ2VyLS1pbicpO1xyXG4gIGhlYWRlckNvdmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdzY3JvbGwnO1xyXG4gIC8vIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XHJcblxyXG59XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblxyXG4gIGxldCBtQnVyZ2VyID0gZS5jb21wb3NlZFBhdGgoKS5pbmNsdWRlcyhidXJnZXJNZW51KTtcclxuICBsZXQgZm9ybUJ0bkNsaWNrZWQgPSBlLmNvbXBvc2VkUGF0aCgpLmluY2x1ZGVzKGJ1cmdlckdldGluZm8pO1xyXG4gIGxldCBub0ZpZWxkID0gZmFsc2U7XHJcbiAgbGV0IEZpZWxkRm9ybSA9IGUuY29tcG9zZWRQYXRoKCkuaW5jbHVkZXModXBGb3JtKTtcclxuICBsZXQgbm9GaWVsZEZvcm0gPSBmYWxzZTtcclxuXHJcbiAgLy8gY29uc3Qgd2l0aGluQm91bmRhcmllcyA9IGUuY29tcG9zZWRQYXRoKCkuaW5jbHVkZXMoZGl2KTtcclxuXHJcbiAgaWYgKGZvcm1CdG5DbGlja2VkKSB7XHJcblxyXG4gICAgYnVyZ2VyTWVudS5jbGFzc0xpc3QucmVtb3ZlKCdoZWFkZXJfX2J1cmdlci0taW4nKTtcclxuICAgIHVwRm9ybS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuXHJcbiAgfVxyXG5cclxuICBpZiAoIW1CdXJnZXIpIHtcclxuICAgIG5vRmllbGQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgbGV0IHB1QXJyID0gW1xyXG5cclxuICAgIGUuY29tcG9zZWRQYXRoKCkuaW5jbHVkZXMoYnVyZ2VyQ2xvc2VCdG4pLFxyXG4gICAgZS5jb21wb3NlZFBhdGgoKS5pbmNsdWRlcyhidXJnZXJMaW5rcylcclxuXHJcbiAgXTtcclxuXHJcbiAgcHVBcnIuZm9yRWFjaChpdGVtID0+IHtcclxuICAgIGlmIChpdGVtKSB7IGNsb3NlQnVyZ2VyKCk7IH1cclxuICB9KVxyXG5cclxuXHJcbiAgaWYgKG5vRmllbGQgPT09IHRydWUpIHtcclxuXHJcbiAgICBpZiAoIUZpZWxkRm9ybSkge1xyXG4gICAgICBub0ZpZWxkRm9ybSA9IHRydWU7XHJcbiAgICAgIHVwRm9ybS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICBjbG9zZUJ1cmdlcigpO1xyXG4gICAgfVxyXG4gIH1cclxufSlcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuLy8g0YTQvtGA0LzQsCDQvtGC0L/RgNCw0LLQutC4INC4INCy0LDQu9C40LTQsNGG0LjRj1xyXG5cclxuXHJcblxyXG4vLyBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblxyXG5cclxubGV0IGZfZm9ybVN1Y2VzcyA9IGZhbHNlO1xyXG5sZXQgZl9zdWJtaXQgPSBmYWxzZTtcclxuXHJcbmxldCB0ZWxTZWxlY3RvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwaG9uZScpLFxyXG4gIG5hbWVTZWxlY3RvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduYW1lJyksXHJcbiAgcXVlc3Rpb25TZWxlY3RvciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdxdWVzdGlvbicpO1xyXG5cclxuLy8gSW5wdXRtYXNrKHsgXCJtYXNrXCI6IFwiKzlbOTldKDlbOTk5OV0pWzlbOTk5OV1dLVs5Wzk5OTldXVwiLCBcImdyZWVkeVwiOiBcImZhbHNlXCIgfSkubWFzayh0ZWxTZWxlY3Rvcik7XHJcbi8vIElucHV0bWFzayh7IFwibWFza1wiOiBcIis5ezEsMjB9LygvKS8uLVwiLCBcImdyZWVkeVwiOiBcImZhbHNlXCIgfSkubWFzayh0ZWxTZWxlY3RvckRvd24pO1xyXG5cclxuY29uc3QgdGVsVmFsaWQgPSBuZXcgSW5wdXRtYXNrKHtcclxuICBtYXNrOiBcIisqezEsMjB9XCIsXHJcbiAgZ3JlZWR5OiBmYWxzZSxcclxuICBkZWZpbml0aW9uczoge1xyXG4gICAgJyonOiB7XHJcbiAgICAgIHZhbGlkYXRvcjogXCJbMC05XFx1MDAyOFxcdTAwMjlcXHUwMDJkXVwiLC8v0LLQsNC70LjQtNCw0YbQuNGPINC/0YDQvtC/0YPRgdC60LDQtdGCINGC0L7Qu9GM0LrQviDRh9C40YHQu9CwINC+0YIgMCDQtNC+IDksINC00LXRhNC40YEg0Lgg0YHQutC+0LHQutC4XHJcbiAgICB9XHJcbiAgfVxyXG59KTtcclxuXHJcbnRlbFZhbGlkLm1hc2sodGVsU2VsZWN0b3IpOyAvL9C/0YDQuNC80LXQvdGP0LXQvCDRgdGE0L7RgNC80LjRgNC+0LLQsNC90L3Rg9GOINC80LDRgdC60YMg0LTQu9GPINGD0LrQsNC30LDQvdC90L7Qs9C+INC40L3Qv9GD0YLQsCBlbWFpbFNlbGVjdG9yXHJcblxyXG5cclxuXHJcbmxldCB2YWxpZEZvcm0gPSBmdW5jdGlvbiAoZSkge1xyXG5cclxuXHJcbiAgbGV0IGxvbmcgPSB0ZWxTZWxlY3Rvci52YWx1ZSxcclxuICAgIGxvbmcyID0gbmFtZVNlbGVjdG9yLnZhbHVlLFxyXG4gICAgbG9uZzMgPSBxdWVzdGlvblNlbGVjdG9yLnZhbHVlO1xyXG4gIGxldCBsb25nTnVtID0gbG9uZy5yZXBsYWNlKC9bXjAtOV0vZywgXCJcIik7IC8v0YPQtNCw0LvRj9C10Lwg0LjQtyDRgdGC0YDQvtC60Lgg0LLRgdGRLCDQutGA0L7QvNC1INGG0LjRhNGAICAvLyDQvtGI0LjQsdC60LAg0LjQty3Qt9CwINGN0YLQvtCz0L5cclxuXHJcbiAgaWYgKChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWdyZWUnKS5jaGVja2VkKSkge1xyXG5cclxuICAgIGlmICgoKGxvbmdOdW0ubGVuZ3RoID4gMikgJiYgKGxvbmdOdW0ubGVuZ3RoIDwgNTApKSAmJiAoKGxvbmcyLmxlbmd0aCA+IDEpICYmIChsb25nMi5sZW5ndGggPCAzNikpICYmICgobG9uZzMubGVuZ3RoID4gMikgJiYgKGxvbmczLmxlbmd0aCA8IDE1MDEpKSkge1xyXG5cclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dhcm5pbmcnKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2FybmluZycpLnN0eWxlLmNvbG9yID0gXCIjNDlmZjBjXCI7XHJcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3YXJuaW5nJykudGV4dENvbnRlbnQgPSBcItCh0L/QsNGB0LjQsdC+LCDQvNGLINGB0LLRj9C20LXQvNGB0Y8g0YEg0JLQsNC80LghXCI7XHJcblxyXG4gICAgICBmdW5jdGlvbiBmX2Zvcm1TdWNlc3MoKSB7XHJcblxyXG4gICAgICAgIHVwRm9ybS5zdWJtaXQoZSk7XHJcblxyXG4gICAgICAgIHNlbmRGb3JtKGUpOyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8g0J7QotCf0KDQkNCS0JrQkCDQpNCe0KDQnNCrISEhIFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcXFxcclxuXHJcbiAgICAgICAgZl9zdWJtaXQgPSB0cnVlO1xyXG5cclxuICAgICAgICBjbG9zZUJ1cmdlcigpO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2FybmluZycpLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuXHJcbiAgICAgIH1cclxuICAgICAgc2V0VGltZW91dChmX2Zvcm1TdWNlc3MsIDIwMDApO1xyXG5cclxuICAgICAgZnVuY3Rpb24gZ29vZGJ5KCkge1xyXG5cclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19mb3JtJykuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICAgIGhlYWRlckNvdmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdzY3JvbGwnO1xyXG5cclxuICAgICAgfVxyXG4gICAgICBzZXRUaW1lb3V0KGdvb2RieSwgMjAwMCk7XHJcblxyXG4gICAgICBjb25zb2xlLmxvZygn0LLQsNC70LjQtNCw0YbQuNGPINC/0YDQvtGI0LvQsCDRg9GB0L/QtdGI0L3QvicpO1xyXG5cclxuICAgICAgZl9mb3JtU3VjZXNzID0gdHJ1ZTtcclxuXHJcbiAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgY29uc29sZS5sb2coJ9GE0L7RgNC80LAg0L3QtSDQv9GA0L7RiNC70LAg0L/QviDQstCw0LvQuNC00LDRhtC40LgnKTtcclxuXHJcblxyXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd2FybmluZycpLnRleHRDb250ZW50ID0gXCLQn9C+0LbQsNC70YPQudGB0YLQsCDQstCy0LXQtNC40YLQtSDQv9GA0LDQstC40LvRjNC90YvQtSDQtNCw0L3QvdGL0LVcIjtcclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dhcm5pbmcnKS5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG5cclxuICAgIH1cclxuICB9IGVsc2Uge1xyXG5cclxuICAgIGNvbnNvbGUubG9nKCfRhNC+0YDQvNCwINC90LUg0L/RgNC+0YjQu9CwINC/0L4g0LLQsNC70LjQtNCw0YbQuNC4Jyk7XHJcblxyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dhcm5pbmcnKS50ZXh0Q29udGVudCA9IFwi0J/QvtC20LDQu9GD0LnRgdGC0LAg0LTQsNC50YLQtSDRgdCy0L7QtSDRgdC+0LPQu9Cw0YHQuNC1INC90LAg0L7QsdGA0LDQsdC+0YLQutGDINC/0LXRgNGB0L7QvdCw0LvRjNC90YvRhSDQtNCw0L3QvdGL0YVcIjtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3YXJuaW5nJykuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICB9XHJcbn1cclxuXHJcbmxldCBzZW5kRm9ybSA9IGZ1bmN0aW9uICgpIHtcclxuXHJcblxyXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChlKSA9PiB7XHJcblxyXG4gICAgZS5wcmV2ZW50RGVmYXVsdDtcclxuXHJcbiAgICAvLyB2YWxpZEZvcm0oZSk7XHJcblxyXG4gICAgaWYgKGZfZm9ybVN1Y2VzcyA9PT0gdHJ1ZSkge1xyXG5cclxuICAgICAgY29uc3Qgc2VuZEZvcm0gPSAoZGF0YSkgPT4ge1xyXG5cclxuICAgICAgICByZXR1cm4gZmV0Y2goJ2ZpbmlzaC5waHAnLCB7XHJcbiAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxyXG4gICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAnQ29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9VVRGLTgnXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSkudGhlbihyZXMgPT4gcmVzLmpzb24oKSk7XHJcbiAgICAgIH07XHJcblxyXG4gICAgICBjb25zdCBkYXRhRm9ybSA9IG5ldyBGb3JtRGF0YShlLnRhcmdldCk7XHJcbiAgICAgIGNvbnN0IHVzZXIgPSB7fTtcclxuXHJcbiAgICAgIGRhdGFGb3JtLmZvckVhY2goKHZhbCwga2V5KSA9PiB7XHJcbiAgICAgICAgdXNlcltrZXldID0gdmFsO1xyXG4gICAgICB9KTtcclxuICAgICAgc2VuZEZvcm0odXNlcikudGhlbihkYXRhID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZygn0J/QuNGB0YzQvNC+INGD0YjQu9C+Jyk7IC8v0LfQtNC10YHRjCDQstGB0YLQsNCy0LvRj9GC0Ywg0YHQvtC+0LHRidC10L3QuNC1INC+0LEg0YPRgdC/0LXRiNC90L7QuSDQvtGC0YHRi9C70LrQtVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGUudGFyZ2V0LnJlc2V0KCk7IC8v0L7QsdC90YPQu9GP0LXRgiDRhNC+0YDQvNGDXHJcblxyXG4gICAgICBmX2Zvcm1TdWNlc3MgPSBmYWxzZTtcclxuICAgIH1cclxuICB9KVxyXG59XHJcblxyXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcblxyXG4gIGxldCBmb3JtUmVxdWVzdCA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5mb3JtX19idG4nKTtcclxuXHJcbiAgaWYgKGZvcm1SZXF1ZXN0KSB7XHJcblxyXG4gICAgdmFsaWRGb3JtKGUpO1xyXG5cclxuICB9XHJcbn0pXHJcblxyXG5cclxuXHJcblxyXG5cclxuIl19